<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Engineering Mystery</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @font-face {
        font-family: "Top Secret";
        src: url("components/[TOP_SECRET].ttf") format("truetype");
        font-display: swap;
      }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        const NoirScavengerHunt = () => {
          const [selectedTeam, setSelectedTeam] = useState(null);
          const [currentClue, setCurrentClue] = useState(0);
          const [userAnswer, setUserAnswer] = useState('');
          const [error, setError] = useState('');
          const [completed, setCompleted] = useState(false);

          // Team configurations with engineering themes
          const teams = {
            mechanical: {
              name: "Mechanical Engineering",
              color: "#c9a55c",
              evidence: "THE WEAPON",
              clues: [
                {
                  text: "Your investigation begins in the heart of motion and machines. The first witness mentioned seeing suspicious activity near the place where metal meets precision. Search where the lathes spin and the mills grind.",
                  answer: ["1/4"],
                  hint: "Where one might take Engineering Projects"
                },
                {
                  text: "The plot thickens! We found some peanut butter at the scene, and it’s not just a snack. The next clue is hidden where someone would want to eat in secret in the EC Lobby",
                  answer: ["Newton", "N", "Newtons"],
                  hint: "Beneath the planet that hangs, silent and watchful, above the stairs"
                },
                {
                  text: "You're close now, detectives! The final piece of your investigation awaits high above the EC Lobby, where students can gain knowledge from their professors.",
                  answer: ["Ideal Gas Law", "Ideal gas law", "ideal gas law"],
                  hint: "A few stories aloft (eight, give or take), in rooms that keep office hours and small consolations."
                }
              ],
              conclusion: "Outstanding work, detective. You've uncovered THE WEAPON: the Theta Tau paddle. Only a true member of the brotherhood would know how to wield it with such precision. The peanut butter was a clever red herring, but the real clue was in the physics of the crime scene. The ideal gas law was the final piece that revealed how the weapon was used to create a vacuum, causing the fatal incident."
            },
            electrical: {
              name: "Electrical Engineering",
              color: "#4a90e2",
              evidence: "THE METHOD OF SABOTAGE",
              clues: [
                {
                  text: "Your case starts where current flows and circuits come alive. The security logs show a power fluctuation at a critical moment. Begin your search where breadboards and oscilloscopes reveal the truth.",
                  answer: ["Ampere", "A", "Amperes", "Amps"],
                  hint: "Where students build and test electronic circuits"
                },
                {
                  text: "Interesting. A burnt capacitor, intentionally damaged. The trail leads to where energy is distributed to students in the building. Investigate where students fuel up for their studies!",
                  answer: ["Ohm's Law", "Ohm's law", "ohm's law", "Ohm's", "ohm's"],
                  hint: "Up for an energy boost? Check where the coffee machines hum and students gather for a quick recharge."
                },
                {
                  text: "The timestamp on the damaged equipment tells a story. From cheat sheets to reports, find where the final piece of the puzzle is printed!",
                  answer: ["alternating current", "AC", "ac", "Alternating current"],
                  hint: "Where findings come out on paper and get quietly circulated on paper!"
                }
              ],
              conclusion: "Excellent detective work. You've pinpointed THE METHOD OF SABOTAGE: a carefully orchestrated electromagnetic pulse (EMP) attack. The burnt capacitor was a key component in the EMP device, and the power fluctuation was the moment it was activated. The clues all pointed to the electrical systems of the building, and the final piece revealed how the saboteur disrupted the power supply to critical equipment, causing chaos and confusion."
            },
            civil: {
              name: "Civil Engineering",
              color: "#8b6f47",
              evidence: "THE LOCATION",
              clues: [
                {
                  text: "Every structure tells a story, detective. Your investigation begins where concrete is tested and foundations are proven. Strange stress fractures were reported - search where materials meet their match.",
                  answer: "materials lab",
                  hint: "Where we test the strength of building materials"
                },
                {
                  text: "The fracture pattern was no accident. Someone with knowledge of structural weak points planned this carefully. Your next clue lies where models of bridges and buildings reveal their secrets under simulated stress.",
                  answer: "structures lab",
                  hint: "Where miniature buildings are tested to failure"
                },
                {
                  text: "You're standing on the answer, detective. The final piece is hidden where soil composition and ground stability are analyzed. The building plans will lead you to the truth.",
                  answer: "geotechnical lab",
                  hint: "Where we study what lies beneath our feet"
                }
              ],
              conclusion: "Masterful work, detective. You've identified THE LOCATION: the sub-basement near the geotechnical lab. The structural analysis shows it's the only spot in the building where the foundation's weakness could be exploited. Someone knew exactly where to strike."
            },
            chemical: {
              name: "Chemical Engineering",
              color: "#6b8e23",
              evidence: "THE MOTIVE",
              clues: [
                {
                  text: "In chemistry, every reaction has a catalyst. Your investigation begins where substances are transformed and equations become reality. A mysterious compound was synthesized here - find where reactions are controlled.",
                  answer: "reaction lab",
                  hint: "Where chemical transformations happen under controlled conditions"
                },
                {
                  text: "The compound analysis reveals intent. Someone was creating something specific, something dangerous. Follow the trail to where liquids are separated and purified, where truth is distilled from mixture.",
                  answer: "distillation room",
                  hint: "Where we separate mixtures based on boiling points"
                },
                {
                  text: "The final answer lies in the data. Check where process flows are designed and optimized, where industrial-scale thinking happens. The motive is written in the process diagrams.",
                  answer: "process design lab",
                  hint: "Where we plan large-scale chemical production"
                }
              ],
              conclusion: "Brilliant deduction, detective. You've uncovered THE MOTIVE: industrial espionage. The process designs reveal plans to steal a revolutionary catalyst formula worth millions. The chemical trail leads directly to corporate sabotage and greed."
            },
            computer: {
              name: "Computer Engineering",
              color: "#9b59b6",
              evidence: "THE SUSPECT",
              clues: [
                {
                  text: "In the digital realm, everyone leaves a trace. Your investigation starts where code is written and debugged. Server logs show unauthorized access from this location. Search where programmers craft their solutions.",
                  answer: "computer lab",
                  hint: "Where rows of computers await eager programmers"
                },
                {
                  text: "The access logs have been tampered with, but not perfectly. A digital fingerprint remains. Your next stop is where networks are configured and data flows between systems. Find where the cables converge.",
                  answer: "server room",
                  hint: "The cold, humming heart of the network"
                },
                {
                  text: "You're close to cracking the case. The final clue is where hardware meets software, where embedded systems and microcontrollers are programmed. The suspect's identity is encoded in the firmware.",
                  answer: "embedded systems lab",
                  hint: "Where we program the computers inside other devices"
                }
              ],
              conclusion: "Exceptional work, detective. You've identified THE SUSPECT: Dr. Alexandra Chen, a visiting researcher with Level 3 access to all labs. The embedded system logs reveal her unique programming style and credential usage. She had the knowledge, access, and expertise to pull this off."
            }
          };

          const handleTeamSelect = (teamKey) => {
            setSelectedTeam(teamKey);
            setCurrentClue(0);
            setUserAnswer('');
            setError('');
            setCompleted(false);
          };

          const handleSubmitAnswer = () => {
            const team = teams[selectedTeam];
            const submittedAnswer = userAnswer.toLowerCase().trim();
            const acceptedAnswers = Array.isArray(team.clues[currentClue].answer)
              ? team.clues[currentClue].answer
              : [team.clues[currentClue].answer];
            const isCorrect = acceptedAnswers.some(
              (answer) => answer.toLowerCase().trim() === submittedAnswer
            );

            if (isCorrect) {
              setError('');
              setUserAnswer('');
              
              if (currentClue === team.clues.length - 1) {
                setCompleted(true);
              } else {
                setCurrentClue(currentClue + 1);
              }
            } else {
              setError('Not quite, detective. Check your evidence again.');
            }
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter') {
              handleSubmitAnswer();
            }
          };

          const resetInvestigation = () => {
            setSelectedTeam(null);
            setCurrentClue(0);
            setUserAnswer('');
            setError('');
            setCompleted(false);
          };

          // AlertCircle icon component
          const AlertCircle = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
          );

          // Landing page - team selection
          if (!selectedTeam) {
            return (
              <div className="min-h-screen bg-gray-900 text-gray-100 p-8">
                <div className="max-w-4xl mx-auto">
                  <div className="text-center mb-12">
                    <h1 className="text-6xl font-bold mb-4" style={{ fontFamily: '"Top Secret", serif', color: '#801517', textShadow: '0 6px 16px rgba(0,0,0,0.35)' }}>
                      THE UPSILON GAMMA WHODUNNIT
                    </h1>
                    <div className="h-1 w-32 bg-amber-400 mx-auto mb-6"></div>
                    <p className="text-xl text-gray-300 italic mb-2">An awful crime has been committed in the Engineering Building!</p>
                    <p className="text-lg text-gray-400">Work together to avenge Aaron and bring glory to Upsilon Gamma!</p>
                  </div>

                  <img
                    src="components/CASE FILE!.png"
                    alt="Case file"
                    className="w-[110%] max-w-none -mx-[5%] mb-8 shadow-2xl"
                  />

                  <h2 className="text-3xl font-bold mb-6 text-center text-amber-400">SELECT YOUR INVESTIGATION TEAM</h2>
                  
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {Object.entries(teams).map(([key, team]) => (
                      <button
                        key={key}
                        onClick={() => handleTeamSelect(key)}
                        className="bg-gray-800 border-3 p-6 hover:bg-gray-700 transition-all transform hover:scale-105 shadow-lg"
                        style={{ borderColor: team.color, borderWidth: '3px' }}
                      >
                        <h3 className="text-2xl font-bold mb-2" style={{ color: team.color }}>
                          {team.name}
                        </h3>
                        <p className="text-gray-400 text-sm mb-3">INVESTIGATING:</p>
                        <p className="text-xl font-bold text-amber-300">{team.evidence}</p>
                      </button>
                    ))}
                  </div>

                  <div className="mt-12 text-center text-gray-500 text-sm">
                    <p>Case File #ENG-06070609 | CLASSIFIED</p>
                  </div>
                </div>
              </div>
            );
          }

          const team = teams[selectedTeam];

          // Completion screen
          if (completed) {
            return (
              <div className="min-h-screen bg-gray-900 text-gray-100 p-8">
                <div className="max-w-3xl mx-auto">
                  <div className="text-center mb-8">
                    <h1 className="text-5xl font-bold mb-4 text-amber-400" style={{ fontFamily: 'Georgia, serif' }}>
                      CASE CLOSED
                    </h1>
                    <div className="h-1 w-24 bg-amber-400 mx-auto mb-6"></div>
                  </div>

                  <div className="bg-gray-800 border-3 p-8 mb-8 shadow-2xl" style={{ borderColor: team.color, borderWidth: '3px' }}>
                    <h2 className="text-3xl font-bold mb-6 text-center" style={{ color: team.color }}>
                      {team.name}
                    </h2>
                    <div className="text-center mb-6">
                      <p className="text-gray-400 text-sm mb-2">EVIDENCE RECOVERED:</p>
                      <p className="text-3xl font-bold text-amber-400 mb-6">{team.evidence}</p>
                    </div>
                    <div className="bg-gray-900 p-6 border-l-4" style={{ borderColor: team.color }}>
                      <p className="text-gray-300 text-lg leading-relaxed">{team.conclusion}</p>
                    </div>
                  </div>

                  <div className="text-center">
                    <p className="text-xl text-gray-300 mb-6">
                      Report your findings to the Chief Inspector immediately.
                    </p>
                    <p className="text-gray-400 mb-8">
                      The other teams are still gathering evidence. Once all pieces are assembled, the full truth will be revealed.
                    </p>
                    <button
                      onClick={resetInvestigation}
                      className="bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-8 transition-all"
                    >
                      Return to Case Files
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          // Active investigation screen
          const currentClueData = team.clues[currentClue];
          
          return (
            <div className="min-h-screen bg-gray-900 text-gray-100 p-8">
              <div className="max-w-3xl mx-auto">
                <div className="mb-8">
                  <button
                    onClick={resetInvestigation}
                    className="text-gray-400 hover:text-amber-400 transition-colors mb-4"
                  >
                    ← Back to Team Selection
                  </button>
                  
                  <div className="text-center">
                    <h1 className="text-4xl font-bold mb-2" style={{ color: team.color, fontFamily: 'Georgia, serif' }}>
                      {team.name}
                    </h1>
                    <p className="text-gray-400">INVESTIGATING: <span className="text-amber-400 font-bold">{team.evidence}</span></p>
                  </div>
                </div>

                <div className="mb-6">
                  <div className="flex justify-between items-center mb-2">
                    <span className="text-gray-400 text-sm">INVESTIGATION PROGRESS</span>
                    <span className="text-gray-400 text-sm">CLUE {currentClue + 1} OF {team.clues.length}</span>
                  </div>
                  <div className="w-full bg-gray-700 h-2">
                    <div 
                      className="h-2 transition-all duration-500"
                      style={{ 
                        width: `${((currentClue + 1) / team.clues.length) * 100}%`,
                        backgroundColor: team.color 
                      }}
                    ></div>
                  </div>
                </div>

                <div className="bg-gray-800 border-3 p-8 mb-6 shadow-2xl" style={{ borderColor: team.color, borderWidth: '3px' }}>
                  <div className="mb-6">
                    <h2 className="text-sm text-gray-500 mb-2">CASE NOTE #{currentClue + 1}</h2>
                    <p className="text-xl text-gray-200 leading-relaxed italic">
                      "{currentClueData.text}"
                    </p>
                  </div>

                  <div className="border-t border-gray-700 pt-6">
                    <label className="block text-sm font-bold mb-3 text-gray-400">
                      ENTER ANSWER TO RIDDLE:
                    </label>
                    <input
                      type="text"
                      value={userAnswer}
                      onChange={(e) => setUserAnswer(e.target.value)}
                      onKeyPress={handleKeyPress}
                      placeholder="Type the answer you believe is correct..."
                      className="w-full bg-gray-900 border-2 border-gray-600 px-4 py-3 text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none mb-4"
                    />
                    
                    {error && (
                      <div className="flex items-center gap-2 text-red-400 mb-4 bg-red-900/20 p-3 border-l-4 border-red-500">
                        <AlertCircle size={20} />
                        <p>{error}</p>
                      </div>
                    )}

                    <button
                      onClick={handleSubmitAnswer}
                      className="w-full font-bold py-3 px-6 transition-all hover:opacity-90 text-white"
                      style={{ backgroundColor: team.color }}
                    >
                      SUBMIT EVIDENCE
                    </button>

                    <details className="mt-4">
                      <summary className="text-gray-500 text-sm cursor-pointer hover:text-gray-400">
                        Need a hint, detective?
                      </summary>
                      <p className="text-gray-400 mt-2 pl-4 italic text-sm">
                        {currentClueData.hint}
                      </p>
                    </details>
                  </div>
                </div>

                <div className="text-center text-gray-600 text-xs">
                  <p>CLASSIFIED | FOR AUTHORIZED INVESTIGATORS ONLY</p>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<NoirScavengerHunt />);
    </script>
</body>
</html>
